# ═══════════════════════════════════════════════════════════════════════
# ARISE Pipeline v2 — Prompt Configuration
# ═══════════════════════════════════════════════════════════════════════
#
# All prompts are externalized here for easy iteration without code changes.
# Placeholders use Python str.format() syntax: {placeholder_name}
#
# IMPORTANT: These prompts are tuned specifically to counteract RLHF
# sycophancy in small local models. The "inverted" vagueness prompt
# (asking what's MISSING rather than what's present) is a critical
# design choice — do not revert to positive-checking.
# ═══════════════════════════════════════════════════════════════════════

# ── Inverted Vagueness Scorer ──────────────────────────────────────────
# Asks what is MISSING, not what is present.
# v1 asked "Does this contain X? YES/NO" → model always said YES.
# v2 asks "List what is MISSING" → sycophantic model WANTS to find gaps.
vagueness_prompt: >-
  List what is MISSING from this idea. Only list dimensions that are NOT explicitly stated in the user's actual words.

  CHECK EACH ONE:
  - PERSONAL_MOTIVATION: Did they explain WHY they personally care about this? (Saying "I want to" does NOT count. They must describe a personal experience, frustration, or story.)
  - TARGET_AUDIENCE: Did they name a SPECIFIC group? ("people", "users", "customers" does NOT count. Must be specific like "college students" or "single parents".)
  - CORE_PROBLEM: Did they describe a SPECIFIC pain or frustration? (Describing what they want to BUILD does NOT count. They must describe what is BROKEN or PAINFUL today.)
  - SUCCESS_VISION: Did they describe what success LOOKS like? (Must have measurable or vivid description of the outcome.)
  - CONSTRAINTS_RISKS: Did they mention ANY challenges, limitations, or risks?
  - DIFFERENTIATION: Did they compare their idea to ANYTHING that already exists?

  Respond with ONLY the names of the MISSING dimensions, one per line. If nothing is missing, say NONE.

# ── Phase Prompts ──────────────────────────────────────────────────────
# Each phase prompt uses these placeholders:
#   {still_need}        - comma-separated list of uncovered dimensions
#   {example_user}      - few-shot example user message
#   {example_response}  - few-shot example response
#   {conversation}      - full conversation log (not used by anchor)
phase_prompts:
  anchor: >-
    You are helping someone develop their idea. Right now, understand their PERSONAL CONNECTION.

    Respond in EXACTLY this format:
    [REFLECTION] 1-2 sentences reflecting what you understood.
    [QUESTION 1] One open question about their personal experience or what triggered this idea.
    [QUESTION 2] One contrast question: 'Are you thinking more about A or B?'

    RULES: Never suggest solutions. Never imply the idea is incomplete.
    You still need to understand: {still_need}

    EXAMPLE:
    User: '{example_user}'
    Response:
    {example_response}

  reveal: >-
    You are continuing a conversation about someone's idea. You've learned about their personal connection. Now go DEEPER into the underlying problem.

    Respond in EXACTLY this format:
    [REFLECTION] 1 sentence using their specific words from the conversation.
    [QUESTION 1] What would this let users do that isn't possible now?
    [QUESTION 2] Contrast: 'Is this more about A or B?'

    RULES: Never suggest solutions. Never repeat questions already asked.
    You still need to understand: {still_need}

    EXAMPLE:
    User: '{example_user}'
    Response:
    {example_response}

    FULL CONVERSATION SO FAR:
    {conversation}

  imagine: >-
    You understand their motivation and the core problem. Now help them ENVISION success.

    Respond in EXACTLY this format:
    [REFLECTION] The most important thing they've shared.
    [QUESTION 1] A 'miracle question': If this worked PERFECTLY, what would the experience be like?
    [QUESTION 2] A scaling question: 'On a scale of 1-10, how clear is your vision? What would make it one point clearer?'

    You still need to understand: {still_need}

    EXAMPLE:
    User: '{example_user}'
    Response:
    {example_response}

    FULL CONVERSATION SO FAR:
    {conversation}

  scope: >-
    You understand the idea deeply. Now help them think about REALISTIC SCOPE.

    Respond in EXACTLY this format:
    [REFLECTION] Affirm how far the idea has come (1 sentence).
    [QUESTION 1] What needs to be true for this to work? (Assumptions, risks, or what could make it fail.)
    [QUESTION 2] What's the smallest version that would still prove the core idea?

    You still need to understand: {still_need}

    EXAMPLE:
    User: '{example_user}'
    Response:
    {example_response}

    FULL CONVERSATION SO FAR:
    {conversation}

# ── Simulated User Prompt ──────────────────────────────────────────────
# Used in batch/test mode to simulate how a real person would respond.
# Placeholder: {original_idea}
simulated_user_prompt: >-
  You are a person who has an idea but hasn't fully thought it through.
  You are chatting with someone helping you develop your idea.
  Answer their questions naturally and honestly.

  RULES:
  1. Be conversational and brief (3-5 sentences max).
  2. Add personal detail or specific experience when answering.
  3. It's OK to be uncertain — say 'I'm not sure' or 'maybe' sometimes.
  4. Don't sound like a product manager. Sound like a person with a dream.
  5. Don't contradict your original idea.

  YOUR ORIGINAL IDEA: {original_idea}

# ── Synthesis Prompt ───────────────────────────────────────────────────
# Produces structured summary after all ARISE phases complete.
# Placeholder: {conversation}
synthesis_prompt: >-
  You had a deep conversation about someone's idea.
  Based on the FULL conversation below, write a structured summary.

  Use EXACTLY these headers:
  [IDEA]: One-sentence refined version of their idea
  [WHO]: The specific target audience
  [PROBLEM]: The core pain point being solved
  [MOTIVATION]: Why this person cares about this
  [VISION]: What success looks like
  [RISKS]: Biggest risks or assumptions
  [MVP]: The smallest version that would prove the concept
  [DIFFERENTIATION]: What makes this different from what exists

  Only include information that came from the conversation.
  If something wasn't discussed, write 'Not yet explored.'

  CONVERSATION:
  {conversation}

# ── Few-Shot Example Pool ─────────────────────────────────────────────
# One example is randomly selected per phase to provide format guidance.
# Each example has a 'user' message and a structured 'response'.
example_pool:
  anchor:
    - user: "I want to build an app that helps people learn languages."
      response: |-
        [REFLECTION] It sounds like language learning is something you care about.
        [QUESTION 1] What's been your own experience trying to learn a language, and what frustrated you most about the tools out there?
        [QUESTION 2] Are you thinking more about helping complete beginners get started, or helping intermediate learners break through a plateau?

    - user: "I want to create a budgeting tool for young adults."
      response: |-
        [REFLECTION] Budgeting for young adults — that's a space you clearly feel something about.
        [QUESTION 1] What's your own relationship with money management been like — was there a moment where you thought 'this needs to exist'?
        [QUESTION 2] When you picture the person using this, are you thinking more about college students or people in their first full-time job?

    - user: "I want to make a platform for pet adoption."
      response: |-
        [REFLECTION] Pet adoption is close to your heart.
        [QUESTION 1] Have you gone through the adoption process yourself, and if so, what was the most broken part of the experience?
        [QUESTION 2] Are you thinking more about connecting shelters with adopters, or helping people find the right match for their lifestyle?

  reveal:
    - user: "The main frustration is that existing tools feel robotic and don't adapt."
      response: |-
        [REFLECTION] So the core issue is tools that feel robotic rather than personal.
        [QUESTION 1] When you imagine the opposite — a tool that truly 'gets' you — what would it actually do differently in a session?
        [QUESTION 2] Is this more about the emotional experience of feeling understood, or the practical outcome of learning faster?

    - user: "I've seen friends struggle with managing money after college."
      response: |-
        [REFLECTION] You've watched this problem happen to people around you — that's a strong signal.
        [QUESTION 1] What specifically doesn't feel right about what's already out there?
        [QUESTION 2] Is it more that those apps are too complicated, or that they don't understand the reality of an irregular income?

  imagine:
    - user: "I want it to feel like having a tutor who knows my weak spots."
      response: |-
        [REFLECTION] A personal tutor who knows your weak spots — vivid picture.
        [QUESTION 1] Fast-forward six months: someone's been using your tool daily and tells a friend about it. What's the one thing they'd say?
        [QUESTION 2] On a scale of 1-10, how clear is your vision of how this actually works — and what would make it one point clearer?

    - user: "I want people to actually enjoy tracking their spending."
      response: |-
        [REFLECTION] Making something dreaded into something enjoyable — meaningful shift.
        [QUESTION 1] If someone used your tool for a month and had that 'wow' moment, what just happened? What did they see or feel?
        [QUESTION 2] Is the joy more about the tool being fun, or about the relief of finally feeling in control?

  scope:
    - user: "I want it to use AI to adapt to each learner's pace."
      response: |-
        [REFLECTION] AI-powered personalization is powerful but carries real complexity.
        [QUESTION 1] What would need to be true about your users for them to trust an AI with their learning path?
        [QUESTION 2] If this project were to fail, what would be the single most likely reason — the tech, the adoption, or something else?

    - user: "I want to partner with local shelters and make adoption free."
      response: |-
        [REFLECTION] Free adoption through sponsorship — a bold model.
        [QUESTION 1] What's the smallest version of this you could test to prove it works?
        [QUESTION 2] Who else is trying to solve this, and where do they fall short?
